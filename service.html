<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="description"
    content="cafe italiano is one of the best restaurant in the city of lights, Karachi. We have unique taste along with our best chefs recepies." />
  <title>caƑe IƮaliano - Services</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link href="css/templatemo-style.css" rel="stylesheet" />
  <link rel="shortcut icon" href="assets/logo/icon.JPG" type="image/x-icon" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous" />
  <link href="css/style.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  <!-- Map Work -->
  <!-- leaflet css -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
  <!-- leaflet js -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
  <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

  <style>
    [href="https://leafletjs.com"] {
      display: none;
    }

    div#map {
      /*overflow: auto;*/
    }
  </style>
  <!-- Map Work -->
</head>

<body>
  <div class="container-fluid">
    <!-- Top box -->
    <!-- Logo & Site Name -->
    <div class="placeholder">
      <div class="parallax-window" data-parallax="scroll" data-image-src="img/simple-house-01.jpg">
        <div class="tm-header">
          <div class="row tm-header-inner">
            <div class="col-md-6 col-12">
              <div class="tm-site-text-box">
                <h1 class="tm-site-title">caƑe IƮaliano</h1>
                <h6 class="tm-site-description">
                  Delicious Traditional Taste
                </h6>
              </div>
            </div>
            <nav class="col-md-6 col-12 tm-nav">
              <ul class="tm-nav-ul">
                <li class="tm-nav-li">
                  <a href="index.html" class="tm-nav-link">Home</a>
                </li>
                <li class="tm-nav-li">
                  <a href="gallery.html" class="tm-nav-link">Gallery</a>
                </li>
                <li class="tm-nav-li">
                  <a href="contact.html" class="tm-nav-link">About</a>
                </li>
                <li class="tm-nav-li">
                  <a href="service.html" class="tm-nav-link active">Services</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <main>
        <header class="row p-lg-5">
          <center class="col-8 text-center offset-2 pt-lg-2 pb-lg-2">
            <h2 class="col-12 text-center tm-section-title">
              Select your Location
            </h2>
            <p class="col-12 text-center">
              Select your location form the given map and fields! Note: this
              page is under construction and will be updated in the near
              future when the page is fully built and ready to be used by the
              application developers.
            </p>
          </center>
        </header>

        <div class="tm-container-inner-2 tm-contact-section">
          <div class="row">
            <div class="col-md-12 position-relative">
              <div class="tm-address-box">
                <h4 class="tm-info-title tm-text-success">Map Location</h4>
              </div>
              <section id="service_form" action="" method="">
                <div class="form-group">
                  <!--Map Work-->
                  <form id="search_form">
                    <!-- <input type="text" id="searchInput" placeholder="Search location" required />
                    <button type="submit">Search</button> -->
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                        <span class="input-group-text">
                          <button class="btn btn-sm" type="button" id="getLocationButton"><i
                              class="fa fa-crosshairs"></i></span></button>
                      </div>
                      <input type="text" name="searchInput" id="searchInput" class="form-control h-auto">
                      <div class="input-group-append">
                        <span class="input-group-text">
                          <button type="submit" class="btn btn-sm" form="search_form"><i
                              class="fa fa-search"></i></button>
                        </span>
                      </div>
                    </div>
                  </form>

                  <input type="text" name="searchInput" id="searchInput" class="form-control"
                    placeholder="Search location" required="" />

                  <input type="hidden" name="latitude" id="latitude" />
                  <input type="hidden" name="longitude" id="longitude" />
                </div>

                <div class="form-group">
                  <div class="tm-map-section container">
                    <div class="row">
                      <div class="col-12 card p-1" style="background-color: #3d3d3d">
                        <!--Map Work-->
                        <div id="map" style="width: 100%; height: 400px"></div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="form-group tm-d-flex">
                  <button type="submit" form="service_form" class="tm-btn tm-btn-success tm-btn-right">
                    Submit
                  </button>
                </div>
                </form>
            </div>
          </div>
        </div>
      </main>
    </div>

    <footer class="tm-footer text-center">
      <p>
        All Rigths Reserved. &copy;
        <script>
          document.write(new Date().getFullYear());
        </script>
        <a href="index.html">caƑe IƮaliano</a>
      </p>
    </footer>
  </div>
  <script src="js/jquery.min.js"></script>
  <script src="js/parallax.min.js"></script>
  <script>
    $(document).ready(function () {
      var acc = document.getElementsByClassName("accordion");
      var i;

      for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
          this.classList.toggle("active");
          var panel = this.nextElementSibling;
          if (panel.style.maxHeight) {
            panel.style.maxHeight = null;
          } else {
            panel.style.maxHeight = panel.scrollHeight + "px";
          }
        });
      }
    });
  </script>
  <!-- Map Work -->
  <script>
    // Create a map centered on a specific location
    var map = L.map("map").setView([51.505, -0.09], 13);

    // Add a tile layer to display the map tiles
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      //attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18,
    }).addTo(map);

    // Add a marker for the user's location
    map.locate({ setView: true, maxZoom: 16 });
    function onLocationFound(e) {
      L.marker(e.latlng).addTo(map);
      //console.log("onLocationFound called with location  " + e.latlng.toString());

      //save the lat/lng coordinates to the form field
      setLocationFormInput(e.latitude, e.longitude);
    }
    map.on("locationfound", onLocationFound);

    // Add a search control for location search
    L.Control.geocoder().addTo(map);

    // Function to handle the click event on the button | current location | and update the map view accordingly
    document.getElementById('getLocationButton').addEventListener('click', function () {
      // Check if the Geolocation API is supported by the browser
      if (navigator.geolocation) {
        // Request the user's current location
        navigator.geolocation.getCurrentPosition(
          function (position) {
            // Retrieve the latitude and longitude coordinates
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            // Set the map view to the user's location
            map.setView([latitude, longitude], 13);

            // Add a marker at the user's location
            L.marker([latitude, longitude]).addTo(map);

            //save the lat/lng coordinates to the form field
            setLocationFormInput(latitude, longitude);
          },
          function (error) {
            console.log('Error occurred. Error code: ' + error.code + '. Error message: ' + error.message);
          }
        );
      } else {
        console.log('Geolocation is not supported by this browser.');
      }
    });

    //setTimeout(function () { }, 1000)
    //$('a[href="https://leafletjs.com"]').remove();

    function setLocationFormInput(latitude, longitude) {
      debugger
      console.log("onLocationFound called with location  " + latitude + " and " + longitude);
      $("#latitude").val(latitude);
      $("#latitude").val(longitude);
    }
  </script>

  <!-- <script>
    // Create a map centered on a specific location
    var map = L.map('map').setView([51.505, -0.09], 13);

    // Add a tile layer to display the map tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      //attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
      maxZoom: 18,
    }).addTo(map);

    // Function to handle form submission
    document.getElementById('search_form').addEventListener('submit', function (e) {
      e.preventDefault(); // Prevent default form submission

      var searchValue = document.getElementById('searchInput').value; // Get the value from the search input

      // Use a geocoding service to retrieve the location data
      L.Control.Geocoder.nominatim().geocode(searchValue, function (results) {
        if (results && results.length > 0) {
          var latlng = results[0].center;
          map.setView(latlng, 13); // Set the map view to the geocoded location
          L.marker(latlng).addTo(map); // Add a marker at the geocoded location
        } else {
          alert('Location not found');
        }
      });
    });

  </script> -->

  <!-- <script>
    // Function to handle the click event on the button | current location | and update the map view accordingly
    document.getElementById('getLocationButton').addEventListener('click', function () {
      // Check if the Geolocation API is supported by the browser
      if (navigator.geolocation) {
      debugger
      // Request the user's current location
        navigator.geolocation.getCurrentPosition(
          function (position) {
            // Retrieve the latitude and longitude coordinates
            var latitude = position.coords.latitude;
            var longitude = position.coords.longitude;

            // Do something with the coordinates, e.g., display them on a map
            map = L.map('map').setView([latitude, longitude], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution:
                'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
              maxZoom: 18,
            }).addTo(map);
            L.marker([latitude, longitude]).addTo(map);
          },
          function (error) {
            console.log('Error occurred. Error code: ' + error.code + '. Error message: ' + error.message);
          }
        );
      } else {
        console.log('Geolocation is not supported by this browser.');
      }
    });

  </script> -->

  <!-- Map Work -->
</body>

</html>